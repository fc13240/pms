<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lotut.pms.dao.mapper.BrandManagementMapper">
	<resultMap type="Brand" id="brandResultMap">
		<id property="id" column="id"/>
		<result property="appNo" column="app_no"/>
		<result property="brandNo" column="brand_no"/>
		<result property="name" column="name"/>
		<result property="similarNo" column="similar_no"/>
		<result property="transactionMode" column="transaction_mode"/>
		<result property="price" column="price"/>
		<result property="scope" column="scope"/>
		<result property="appPerson" column="app_person"/>
		<result property="appDate" column="app_date"/>
		<result property="publishDate" column="publish_date"/>
		<result property="originality" column="originality"/>
		<result property="caseStatus" column="case_status"/>
		<result property="imageUrl" column="image_url"/>
		<result property="proxyFile" column="proxy_file"/>
		<result property="businessLicense" column="business_license"/>
		<result property="entityLicense" column="entity_license"/>
		<result property="individualLicense" column="individual_license"/>
		<result property="identityCard" column="identity_card"/>
		<result property="application" column="application"/>
		<association property="user" javaType="User">
			<id property="userId" column="user"/>
			<result property="username" column="username"/>
		</association>
		<association property="brandCategory" javaType="BrandCategory">
			<id property="categoryId" column="category_id"/>
			<result property="categoryName" column="category_name"/>
		</association>
		<association property="brandLegalStatus" javaType="BrandLegalStatus">
			<id property="legalStatusId" column="legal_status_id"/>
			<result property="legalStatusName" column="legal_status_name"/>
		</association>
	</resultMap>

  	<insert id="addOrEditBrand" parameterType="Brand" useGeneratedKeys="true" keyProperty="id">
		insert into brands(address,category_id,brand_no,name,
		combination_type,similar_no,transaction_mode,price,scope,
		app_person,app_date,publish_date,start_date,end_date,originality,case_status,user,check_status,image_url)
		values(#{address},#{brandCategory.categoryId},#{brandNo},
		 #{name},#{combinationType},#{similarNo},#{transactionMode},#{price},#{scope},#{appPerson},
		 #{appDate,javaType=date,jdbcType=DATE},#{publishDate,javaType=date,jdbcType=DATE},#{startDate,javaType=date,jdbcType=DATE},
		 #{endDate,javaType=date,jdbcType=DATE},#{originality},#{caseStatus},#{user.userId},3,#{imageUrl})
		on duplicate key update 
			address=#{address},category_id=#{brandCategory.categoryId},
			name=#{name},combination_type=#{combinationType},
			similar_no=#{similarNo},transaction_mode=#{transactionMode},price=#{price},scope=#{scope},
			app_person=#{appPerson},app_date=#{appDate,javaType=date,jdbcType=DATE},
			publish_date=#{publishDate,javaType=date,jdbcType=DATE},
			start_date=#{startDate,javaType=date,jdbcType=DATE},
		 	end_date=#{endDate,javaType=date,jdbcType=DATE},originality=#{originality},case_status=#{caseStatus},
		 	user=#{user.userId},image_url=#{imageUrl},check_status=3
	</insert> 
 
  	<insert id="insertOrUpdateBrand" parameterType="Brand" useGeneratedKeys="true" keyProperty="id">
		insert into brands(address,category_id,brand_no,name,
		combination_type,similar_no,transaction_mode,price,scope,
		app_person,app_date,publish_date,start_date,end_date,originality,case_status,user,check_status,image_url,sell_status)
		values(#{address},#{brandCategory.categoryId},#{brandNo},
		 #{name},#{combinationType},#{similarNo},#{transactionMode},#{price},#{scope},#{appPerson},
		 #{appDate,javaType=date,jdbcType=DATE},#{publishDate,javaType=date,jdbcType=DATE},#{startDate,javaType=date,jdbcType=DATE},
		 #{endDate,javaType=date,jdbcType=DATE},#{originality},#{caseStatus},#{user.userId},1,#{imageUrl},1)
		on duplicate key update 
			address=#{address},category_id=#{brandCategory.categoryId},
			name=#{name},combination_type=#{combinationType},
			similar_no=#{similarNo},transaction_mode=#{transactionMode},price=#{price},scope=#{scope},
			app_person=#{appPerson},app_date=#{appDate,javaType=date,jdbcType=DATE},
			publish_date=#{publishDate,javaType=date,jdbcType=DATE},
			start_date=#{startDate,javaType=date,jdbcType=DATE},
		 	end_date=#{endDate,javaType=date,jdbcType=DATE},originality=#{originality},case_status=#{caseStatus},
		 	user=#{user.userId},image_url=#{imageUrl},check_status=1,sell_status=1
	</insert>
	
</mapper>
  
